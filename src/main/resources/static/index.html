<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Welcome Page</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                background: #f4f4f4;
                padding: 20px;
                margin: 0;
            }

            .container {
                max-width: 1000px;
                margin: auto;
                background-color: #fff;
                padding: 30px;
                border-radius: 10px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }

            h1, h2 {
                text-align: center;
                color: #5694d7;
            }

            hr {
                margin: 30px 0;
            }

            .logo {
                display: block;
                margin: 0 auto 20px;
                max-width: 180px;
            }

            .index {
                display: block;
                margin: 0 auto 20px;
                max-width: 100%;
            }

            .policy {
                text-align: left;
                padding: 20px;
                background-color: #fafafa;
                border: 1px solid #ddd;
                border-radius: 8px;
            }

            .heads {
                color: #5694d7;
                font-weight: bold;
                margin-top: 25px;
            }

            ul {
                padding-left: 20px;
            }

            ul li {
                margin-bottom: 10px;
            }

            .button-group {
                display: flex;
                justify-content: center;
                gap: 15px;
                flex-wrap: wrap;
                margin-top: 30px;
            }

            .button-group button {
                padding: 12px 20px;
                font-size: 14px;
                background-color: #516e8e;
                color: white;
                border: none;
                border-radius: 6px;
                cursor: pointer;
                transition: background-color 0.3s;
            }

            .button-group button:hover {
                background-color: #057ef8;
            }

            @media screen and (max-width: 768px) {
            .container {
                padding: 20px;
            }

            .policy {
                padding: 15px;
            }

            .button-group {
                flex-direction: column;
                gap: 10px;
                align-items: center;
            }

            .button-group button {
                width: 100%;
                max-width: 280px;
            }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="site-header">
                <nav id="main-nav">
                    <a href="index.html">Home</a>
                    <a href="signup.html">Signup</a>
                    <a href="signin.html">Login</a>
                    <a href="memberDetails.html">Profile</a>
                    <a href="register.html">Register</a>
                    <a href="list.html">Members</a>
                    <a href="email.html">Send Notification</a>
                    <a href="admin.html">Update User Role</a>
                    <a href="#" id="logout-link" style="display: none;" onclick="logout()">Logout</a>
                </nav>
                <hr>
            </div>
            <h1>Welcome to EverLink Holding</h1>
            <img class="logo" src="/image/logo.jpeg" alt="Everlink Holding LLC Logo">
            <hr>
            <div class="policy">
                <h2>EverLink Holding Members Policy</h2>
                <!--
                <p class="heads">Membership Eligibility & Legacy Pool</p>
                <ul>
                    <li>
                        <b>Effective Date:</b>
                        Contributions begin July 1, 2020.
                    </li>
                    <li>
                        Registration requirement:
                        <ul>
                            <li>Payment of the registration fee.</li>
                            <li>At least three months of membership payments paid in advance.</li>
                            <li>Married : $210 + $90, unmarried: $140 + $60</li>
                        </ul>
                    </li>
                    <li>Member qualifies for the legacy pool only if he/she was officially registered before the exit date of the departing member.
                        <ul>
                            <li>Members registered on the same date of the exit date are not eligible for legacy pool.</li>
                        </ul>
                    </li>
                </ul>
                <p class="heads">Marital Status & Ownership</p>
                <ul>
                    <li>Only two marital statuses are recognized as of now: Married or unmarried.</li>
                    <li>
                        Ownership percentage depends on:
                        <ul>
                            <li>Official membership registration date.</li>
                            <li>Marital status.</li>
                            <li>Total amount of legacy pool.</li>
                        </ul>
                    </li>
                    <li>Married members own and contribute 1.5 times the share of unmarried members.</li>
                    <li>Couples are treated as one member and their ownership and contribution will be 1.5 times of unmarried. And registered on the name of either of them.</li>
                </ul>
                <p class="heads">Membership Payment & Join Date Rules</p>
                <ul>
                    <li>Any member's membership payments must be fully up to date to remain eligible for any benefits.</li>
                    <li>New members may choose a backdated join date as early as July 1, 2020, provided all required membership payments for the selected period have been paid in full.</li>
                    <ul>
                        <li>If July 1, 2020 is selected as the join date, the registration fee will be waived.</li>
                    </ul>
                    <li>To be consistent, all join dates and marital status changes are recorded as the first day of the month following the qualification or event.</li>
                </ul>
                <p class="heads">Marital Status Changes</p>
                <ul>
                    <li>If a member gets married, their status must change to married starting from the first day of the month following the marriage. Monthly contributions will increase to the Married rate (1.5Ã— the unmarried rate) from that month onward.</li>
                    <li>If a Married member marital status changed to unmarried (e.g., through divorce or separation), changing their status to unmarried starting from the first day of the month following the status change is optional (not mandatory). If a member choose to change, monthly contributions will decrease to the unmarried rate. Note: this will affect ownership percentage.</li>
                </ul>
                <p class="heads">Member Exit & Payment Rules</p>
                <ul>
                    <li>
                        Leave dates are recorded as:
                        <ul>
                            <li>The first day of the current month if membership payments are up to date.</li>
                            <li>Otherwise, the first day of the month following the last covered payment.</li>
                        </ul>
                    </li>
                    <li>Upon exiting, all membership and associated payments are non-refundable. Any pending asset allocations will be suspended and reallocated to active members.</li>
                </ul>-->

                <p>Click <a href="/docs/everlink_member_policy_en.pdf" target="_blank">here </a>to read everLink member policy in English</p>
                <p>Click <a href="/docs/everlink_member_policy_tig.pdf" target="_blank">here </a>to read everLink member policy in Tigriyna</p>
                <p>Click <a href="https://www.youtube.com/@EverLinkHolding" target="_blank">here </a>to check our youtube channel. Don't forget to subscribe.</p>

                <img class="index" src="/image/index.jpeg" alt="Everlink Holding LLC Logo">
            </div>
            <div class="button-group">
                <button onclick="window.location.href='signup.html'">Signup</button>
            </div>
            <div id="footer"></div>
        </div>
        <script>
            const user = JSON.parse(localStorage.getItem("user"));
            const nav = document.getElementById("main-nav");
            const links = Array.from(nav.querySelectorAll("a"));

            // Define restricted links by role
            const restrictedForNone = ["register.html", "list.html", "email.html", "admin.html", "memberDetails.html", "logout"];
            const restrictedForUser = ["register.html", "list.html", "email.html", "admin.html", "signup.html", "signin.html"];
            const restrictedForAdmin = ["signup.html", "signin.html"];

            // Hide links based on role
            if (user === null) {
                links.forEach(link => {
                    if (restrictedForNone.some(r => link.href.includes(r))) {
                        link.style.display = "none";
                    }
                });
            } else if (user?.roles[0].name === 'USER') {
                links.forEach(link => {
                    if (restrictedForUser.some(r => link.href.includes(r))) {
                        link.style.display = "none";
                    }
                });
            } else if (user?.roles[0].name === 'ADMIN') {
                links.forEach(link => {
                    if (restrictedForAdmin.some(r => link.href.includes(r))) {
                        link.style.display = "none";
                    }
                });
            }
            if (user?.roles?.[0]?.name === 'USER' || user?.roles?.[0]?.name === 'ADMIN') {
                document.getElementById("logout-link").style.display = "inline";
            } else {
                document.getElementById("logout-link").style.display = "none";
            }

            // Add separator (|) between visible links
            const visibleLinks = links.filter(link => link.style.display !== "none");
            nav.innerHTML = ''; // clear nav

            visibleLinks.forEach((link, index) => {
                nav.appendChild(link);
                if (index < visibleLinks.length - 1) {
                    const separator = document.createTextNode(" | ");
                    nav.appendChild(separator);
                }
            });

            function logout() {
                fetch("/api/v1/members/logout", {
                    method: "POST",
                    credentials: "include"
                }).then(() => {
                    localStorage.removeItem("user"); // Clear user info from localStorage
                    window.location.href = "index.html"; // Redirect to home
                }).catch(err => console.error("Logout failed:", err));
            }

            // Inject footer
            fetch("footer.html")
              .then(res => res.text())
              .then(data => document.getElementById("footer").innerHTML = data);
        </script>
    </body>
</html>
